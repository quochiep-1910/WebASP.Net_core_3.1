@model HomeViewModel
@using eShop.ViewModels.Catalog.Products;
@inject Microsoft.Extensions.Configuration.IConfiguration Configuration;
@inject LazZiya.ExpressLocalization.ISharedCultureLocalizer _loc;

@{
    ViewData["Title"] = "Trang Chủ";
    var culture = CultureInfo.CurrentCulture;
}

@section slider{
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <section id="slider">
        <!--slider-->
        <div class="container">
            <div class="row">

                <div class="col-sm-12">
                    <div id="myCarousel" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                            <li data-target="#myCarousel" data-slide-to="1"></li>
                            <li data-target="#myCarousel" data-slide-to="2"></li>
                        </ol>

                        <div class="carousel-inner">
                            @for (int index = 0; index < Model.Slides.Count; index++)
                            {
                                var slide = Model.Slides[index];
                                <div class="item  @(index == 0 ? "active" : "")">
                                    <div class="col-sm-6">
                                        @Html.Raw(slide.Name)

                                        <p>@slide.Description</p>
                                        <button type="button" class="btn btn-default get">Get it now</button>
                                    </div>
                                    <div class="col-sm-6">
                                        <img src="@slide.Image" class="girl img-responsive" alt="" />
                                        <img src="images/home/pricing.png" class="pricing" alt="" />
                                    </div>
                                </div>
                            }
                        </div>

                        <a href="#myCarousel" class="left carousel-control" data-slide="prev">
                            <span class="glyphicon glyphicon-chevron-left"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a href="#myCarousel" class="right carousel-control" data-slide="next">
                            <span class="glyphicon glyphicon-chevron-right"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section><!--/slider-->}
<div class="col-sm-9 padding-right">
    <div class="features_items">
        <!--features_items-->
        <h2 class="title text-center">Sản phẩm mới</h2>
        @foreach (var product in Model.FeaturedProducts)
        {
            <div class="col-sm-4">
                <div class="product-image-wrapper">
                    <div class="single-products">
                        <div class="productinfo text-center">

                            <img src="@(Configuration["BaseAddress"] + product.ThumbnailImage)" alt="@product.Name" />
                            <h2>$@product.Price</h2>
                            <p>@product.Name</p>
                        </div>
                        <div class="product-overlay">
                            <div class="overlay-content">
                                <h2>$@product.Price</h2>
                                <p>@product.Name</p>
                                <a class="btn btn-default add-to-cart btn-add-cart" data-id="@product.Id" href="#"><i class="fa fa-shopping-cart"></i>Add to cart</a>
                            </div>
                            @if (product.IsFeatured == true)
                            {
                                <img src="/images/home/new.png" class="new" alt="">
                            }
                        </div>
                    </div>
                    <div class="choose">
                        <ul class="nav nav-pills nav-justified">
                            <li><a href="/@culture.Name/@_loc["products"]/@product.Id"><i class="fa fa-plus-square"></i>Xem sản phẩm</a></li>
                            <li><a href="#"><i class="fa fa-plus-square"></i>Add to compare</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        }
    </div><!--features_items-->

    <div class="category-tab">
        <!--category-tab-->
        <div class="col-sm-12">
            <ul class="nav nav-tabs">

                    @foreach (var category in Model.CategoryList)
                    {
                        <li>
                            <a class="handleCategory"  data-id="@category.Id" href="#" data-toggle="tab">@category.Name</a>
                        </li>
                    }
            </ul>
        </div>
        <div class="tab-content">
            <div class="tab-pane fade active in" id="productBody">
            </div>
        </div>
    </div><!--/category-tab-->

    <div class="recommended_items">
        <!--recommended_items-->
        <h2 class="title text-center">recommended items</h2>

        <div id="recommended-item-carousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">

                @for (int index = 0; index < Model.LastestProducts.Count; index++)
                {
                    <div class="item  @(index == 0 ? "active" : "")">

                        @foreach (var item in Model.LastestProducts)
                        {
                            var url = $"/{culture}/{_loc["productUrl"]}/{item.Id}";
                            <div class="col-sm-4">
                                <div class="product-image-wrapper">
                                    <div class="single-products">
                                        <div class="productinfo text-center">
                                            <a href="/vi-VN/san-pham/@item.Id">
                                                <img src="@(Configuration["BaseAddress"] + item.ThumbnailImage)" alt="@item.Name" />
                                            </a>
                                            <h2>$@item.Price</h2>
                                            <p>@item.Name</p>
                                            <a class="btn btn-default add-to-cart btn-add-cart" data-id="@item.Id" href="#"><i class="fa fa-shopping-cart"></i>Add to cart</a>
                                        </div>
                                        @if (item.IsFeatured == true)
                                        {
                                            <img src="/images/home/new.png" class="new" alt="">
                                        }
                                        else
                                        {
                                            <img src="/images/home/sale.png" class="new" alt="">
                                        }
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                }
            </div>
            <a class="left recommended-item-control" href="#recommended-item-carousel" data-slide="prev">
                <i class="fa fa-angle-left"></i>
            </a>
            <a class="right recommended-item-control" href="#recommended-item-carousel" data-slide="next">
                <i class="fa fa-angle-right"></i>
            </a>
        </div>
    </div><!--/recommended_items-->
</div>

<script id="tplProduct" type="x-tmpl-mustache">
    <div class="col-sm-3">
        <div class="product-image-wrapper">
            <div class="single-products">
                <div class="productinfo text-center">

                   <a href ="/vi-VN/san-pham/{{id}}"> <img src="https://localhost:5001/{{thumbnailImage}}" alt="" />
                    <h2>${{price}}</h2>
                    <p>{{name}}</p>
                    <a href="#" class="btn btn-default add-to-cart"><i class="fa fa-shopping-cart"></i>Add to cart</a>
                </div>
            </div>
        </div>
    </div>
</script>